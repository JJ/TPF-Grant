{
  "body": "The [Channel.poll docs](https://docs.perl6.org/language/concurrency#Channels) have this code example:\n\n``` perl6\nmy $c = Channel.new;\n\nstart {\n    my $closed = $c.closed;\n    loop {\n        if $c.poll -> $item {\n            say $item;\n        }\n        elsif $closed {\n            last;\n        }\n    }\n}\n\nawait (^10).map: -> $r {\n    start {\n        sleep $r;\n        $c.send($r);\n    }\n}\n$c.close;\n```\n\nIt's a bit questionable for two reasons:\n1. The `.poll` is already inside a Promise, so using a blocking `.receive` would make more sense here instead of wasting CPU cycles repeatedly calling `.poll` and doing the conditional. So the example should use some actual code where `.poll` is useful (what would that be? I don't know)\n2. There's a race condition. After we close the Channel we never `await` the first Promise, so the program will likely exit without outputting some items.\n",
  "author_association": "OWNER",
  "assignees": [
    {
      "following_url": "https://api.github.com/users/zoffixznet/following{/other_user}",
      "gists_url": "https://api.github.com/users/zoffixznet/gists{/gist_id}",
      "received_events_url": "https://api.github.com/users/zoffixznet/received_events",
      "organizations_url": "https://api.github.com/users/zoffixznet/orgs",
      "subscriptions_url": "https://api.github.com/users/zoffixznet/subscriptions",
      "html_url": "https://github.com/zoffixznet",
      "id": 5747918,
      "login": "zoffixznet",
      "type": "User",
      "repos_url": "https://api.github.com/users/zoffixznet/repos",
      "site_admin": false,
      "events_url": "https://api.github.com/users/zoffixznet/events{/privacy}",
      "gravatar_id": "",
      "avatar_url": "https://avatars2.githubusercontent.com/u/5747918?v=4",
      "starred_url": "https://api.github.com/users/zoffixznet/starred{/owner}{/repo}",
      "followers_url": "https://api.github.com/users/zoffixznet/followers",
      "url": "https://api.github.com/users/zoffixznet"
    }
  ],
  "assignee": {
    "following_url": "https://api.github.com/users/zoffixznet/following{/other_user}",
    "gists_url": "https://api.github.com/users/zoffixznet/gists{/gist_id}",
    "received_events_url": "https://api.github.com/users/zoffixznet/received_events",
    "organizations_url": "https://api.github.com/users/zoffixznet/orgs",
    "subscriptions_url": "https://api.github.com/users/zoffixznet/subscriptions",
    "html_url": "https://github.com/zoffixznet",
    "id": 5747918,
    "login": "zoffixznet",
    "type": "User",
    "repos_url": "https://api.github.com/users/zoffixznet/repos",
    "site_admin": false,
    "events_url": "https://api.github.com/users/zoffixznet/events{/privacy}",
    "gravatar_id": "",
    "avatar_url": "https://avatars2.githubusercontent.com/u/5747918?v=4",
    "starred_url": "https://api.github.com/users/zoffixznet/starred{/owner}{/repo}",
    "followers_url": "https://api.github.com/users/zoffixznet/followers",
    "url": "https://api.github.com/users/zoffixznet"
  },
  "closed_by": {
    "following_url": "https://api.github.com/users/zoffixznet/following{/other_user}",
    "gists_url": "https://api.github.com/users/zoffixznet/gists{/gist_id}",
    "received_events_url": "https://api.github.com/users/zoffixznet/received_events",
    "organizations_url": "https://api.github.com/users/zoffixznet/orgs",
    "subscriptions_url": "https://api.github.com/users/zoffixznet/subscriptions",
    "html_url": "https://github.com/zoffixznet",
    "id": 5747918,
    "login": "zoffixznet",
    "type": "User",
    "repos_url": "https://api.github.com/users/zoffixznet/repos",
    "site_admin": false,
    "events_url": "https://api.github.com/users/zoffixznet/events{/privacy}",
    "gravatar_id": "",
    "avatar_url": "https://avatars2.githubusercontent.com/u/5747918?v=4",
    "starred_url": "https://api.github.com/users/zoffixznet/starred{/owner}{/repo}",
    "followers_url": "https://api.github.com/users/zoffixznet/followers",
    "url": "https://api.github.com/users/zoffixznet"
  },
  "updated_at": "2018-04-09T19:09:38Z",
  "created_at": "2016-07-24T02:11:23Z",
  "comments_url": "https://api.github.com/repos/perl6/doc/issues/751/comments",
  "locked": false,
  "title": "Poor example of Channel.poll",
  "id": 167212961,
  "html_url": "https://github.com/perl6/doc/issues/751",
  "closed_at": "2016-08-05T16:25:46Z",
  "milestone": null,
  "state": "closed",
  "labels_url": "https://api.github.com/repos/perl6/doc/issues/751/labels{/name}",
  "number": 751,
  "comments": 0,
  "labels": [
    {
      "color": "5DE0FA",
      "name": "docs",
      "id": 244843225,
      "default": false,
      "url": "https://api.github.com/repos/perl6/doc/labels/docs"
    },
    {
      "color": "8cef88",
      "name": "good first issue",
      "id": 876253381,
      "default": true,
      "url": "https://api.github.com/repos/perl6/doc/labels/good%20first%20issue"
    }
  ],
  "events_url": "https://api.github.com/repos/perl6/doc/issues/751/events",
  "user": {
    "following_url": "https://api.github.com/users/zoffixznet/following{/other_user}",
    "gists_url": "https://api.github.com/users/zoffixznet/gists{/gist_id}",
    "received_events_url": "https://api.github.com/users/zoffixznet/received_events",
    "organizations_url": "https://api.github.com/users/zoffixznet/orgs",
    "subscriptions_url": "https://api.github.com/users/zoffixznet/subscriptions",
    "html_url": "https://github.com/zoffixznet",
    "id": 5747918,
    "login": "zoffixznet",
    "type": "User",
    "repos_url": "https://api.github.com/users/zoffixznet/repos",
    "site_admin": false,
    "events_url": "https://api.github.com/users/zoffixznet/events{/privacy}",
    "gravatar_id": "",
    "avatar_url": "https://avatars2.githubusercontent.com/u/5747918?v=4",
    "starred_url": "https://api.github.com/users/zoffixznet/starred{/owner}{/repo}",
    "followers_url": "https://api.github.com/users/zoffixznet/followers",
    "url": "https://api.github.com/users/zoffixznet"
  },
  "repository_url": "https://api.github.com/repos/perl6/doc",
  "url": "https://api.github.com/repos/perl6/doc/issues/751"
}