{
  "body": "The current documentation of [`|` alternations](https://docs.perl6.org/language/regexes#Longest_Alternation:_|) is regrettably short and inaccurate.\r\n\r\nThis is causing users to get confused about what `|` actually does - see e.g. #1141 and the multiple Rakudo RT's that have popped up (and been rejected) about this.\r\n\r\nThis really needs to be explained much more accurately.\r\n\r\n### Resources:\r\n\r\n* The design docs have a long wall of text about it [S05#Longest-token_matching](http://design.perl6.org/S05.html#Longest-token_matching).  \r\n  (As well as some more relevant stuff in  [S05#Overview](http://design.perl6.org/S05.html#Overview) and the intro blurb above it.)\r\n* In [RT #132066](https://rt.perl.org/Ticket/Display.html?id=132066), I tried to give a short explanation for the basic rule.\r\n\r\nEssentially, what `|` does is this:\r\n\r\n1. Select the branch whose **declarative prefix** matches the longest string.\r\n1. If it's a tie, select the match with the **highest specificity**.\r\n1. If it's still a tie, use additional tie-breakers.\r\n\r\n### Thoughts:\r\n\r\nThe difficulty is in...\r\n\r\n* Thoroughly explaining the bolded parts in a way that newbies will find intuitive, without sacrificing conciseness.  \r\n  *(For completeness, and to help users think in these terms, the documentation of all other regex constructs should probably be extended to mention whether they are considered declarative or procedural.)*  \r\n  \r\n* Reaching clarity on what \"additional tie-breakers\", exactly, apply to `|`.  \r\n  *(The tie-breaker stuff in S05 seems to have been written largely with LTM of [`proto`-regexes](https://design.perl6.org/S05.html#line_1348) in mind &ndash; some of it [cannot apply](https://irclog.perlgeek.de/perl6/2017-01-20#i_13960983) to LTM of `|`, and some of it [is a bit ambiguous](https://rt.perl.org/Ticket/Display.html?id=130612) w.r.t. to how it should apply to `|`.)*\r\n\r\nAlso note that Rakudo currently has at least two LTM bugs:\r\n\r\n* [RT #122951](https://rt.perl.org/Ticket/Display.html?id=122951)\r\n* [RT #130612](https://rt.perl.org/Ticket/Display.html?id=130612)\r\n\r\n(Although those are edge cases, and shouldn't distract from the fact that Rakudo *is* mostly S05-compliant on this topic, and last I heard Perl 6.c *is* supposed to implement LTM as specced by S05.)",
  "author_association": "MEMBER",
  "milestone": null,
  "html_url": "https://github.com/perl6/doc/issues/1550",
  "events_url": "https://api.github.com/repos/perl6/doc/issues/1550/events",
  "url": "https://api.github.com/repos/perl6/doc/issues/1550",
  "state": "closed",
  "labels": [
    {
      "url": "https://api.github.com/repos/perl6/doc/labels/docs",
      "default": false,
      "name": "docs",
      "color": "5DE0FA",
      "id": 244843225,
      "node_id": "MDU6TGFiZWwyNDQ4NDMyMjU="
    }
  ],
  "title": "Explain LTM (longest token matching) in regexes",
  "labels_url": "https://api.github.com/repos/perl6/doc/issues/1550/labels{/name}",
  "closed_at": "2017-11-01T00:04:09Z",
  "assignees": [
    
  ],
  "locked": false,
  "repository_url": "https://api.github.com/repos/perl6/doc",
  "closed_by": {
    "events_url": "https://api.github.com/users/TisonKun/events{/privacy}",
    "following_url": "https://api.github.com/users/TisonKun/following{/other_user}",
    "followers_url": "https://api.github.com/users/TisonKun/followers",
    "html_url": "https://github.com/TisonKun",
    "url": "https://api.github.com/users/TisonKun",
    "site_admin": false,
    "type": "User",
    "organizations_url": "https://api.github.com/users/TisonKun/orgs",
    "gists_url": "https://api.github.com/users/TisonKun/gists{/gist_id}",
    "avatar_url": "https://avatars0.githubusercontent.com/u/18818196?v=4",
    "id": 18818196,
    "starred_url": "https://api.github.com/users/TisonKun/starred{/owner}{/repo}",
    "received_events_url": "https://api.github.com/users/TisonKun/received_events",
    "gravatar_id": "",
    "repos_url": "https://api.github.com/users/TisonKun/repos",
    "subscriptions_url": "https://api.github.com/users/TisonKun/subscriptions",
    "node_id": "MDQ6VXNlcjE4ODE4MTk2",
    "login": "TisonKun"
  },
  "comments": 0,
  "user": {
    "events_url": "https://api.github.com/users/smls/events{/privacy}",
    "following_url": "https://api.github.com/users/smls/following{/other_user}",
    "followers_url": "https://api.github.com/users/smls/followers",
    "html_url": "https://github.com/smls",
    "url": "https://api.github.com/users/smls",
    "site_admin": false,
    "type": "User",
    "organizations_url": "https://api.github.com/users/smls/orgs",
    "gists_url": "https://api.github.com/users/smls/gists{/gist_id}",
    "avatar_url": "https://avatars0.githubusercontent.com/u/3093580?v=4",
    "id": 3093580,
    "starred_url": "https://api.github.com/users/smls/starred{/owner}{/repo}",
    "received_events_url": "https://api.github.com/users/smls/received_events",
    "gravatar_id": "",
    "repos_url": "https://api.github.com/users/smls/repos",
    "subscriptions_url": "https://api.github.com/users/smls/subscriptions",
    "node_id": "MDQ6VXNlcjMwOTM1ODA=",
    "login": "smls"
  },
  "id": 256791067,
  "updated_at": "2017-11-01T00:04:09Z",
  "assignee": null,
  "created_at": "2017-09-11T17:59:54Z",
  "number": 1550,
  "comments_url": "https://api.github.com/repos/perl6/doc/issues/1550/comments",
  "node_id": "MDU6SXNzdWUyNTY3OTEwNjc="
}